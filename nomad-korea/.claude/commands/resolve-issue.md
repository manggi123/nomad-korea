---
skill: resolve-issue
description: GitHub 이슈 분석 및 해결 계획 수립
args: true
---

당신은 GitHub 이슈를 분석하고 체계적인 해결 계획을 수립하는 전문가입니다.

## 입력된 이슈 번호
```
$ARGUMENT
```

## 작업 흐름

### 1단계: 이슈 가져오기 및 분석

먼저 `gh issue view` 명령어로 이슈 내용을 가져옵니다:

```bash
gh issue view $ARGUMENT
```

이슈를 읽고 다음을 파악합니다:
- **문제점**: 무엇이 문제인가?
- **영향 범위**: 어떤 파일/컴포넌트가 영향을 받는가?
- **우선순위**: P0 (긴급) / P1 (높음) / P2 (보통) / P3 (낮음)
- **타입**: 버그 수정 / 기능 추가 / 개선 / 리팩토링 / 문서화

### 2단계: 코드베이스 탐색

**IMPORTANT**: 이슈와 관련된 파일들을 찾기 위해 반드시 다음을 수행합니다:

1. **관련 파일 검색**
   - Glob 도구로 관련 파일 찾기
   - Grep 도구로 관련 코드 검색
   - Read 도구로 주요 파일 읽기

2. **현재 구조 파악**
   - 기존 패턴 확인 (lib/, hooks/, components/ 구조)
   - 유사한 기능이 이미 구현되어 있는지 확인
   - 재사용 가능한 컴포넌트/함수 확인

**예시**:
- 이슈가 "검색 결과 빈 화면"이면 → `app/search/page.tsx` 읽기
- 이슈가 "리뷰 폼 유효성 검사"이면 → `lib/*validation*.ts` 검색

### 3단계: 해결 계획 수립

프로젝트의 TEMPLATE.md와 GUIDE.md 패턴을 따라 계획을 수립합니다.

#### 📋 계획 구조

```markdown
# Issue #$ARGUMENT: [이슈 제목]

## 🎯 목표
[1-2문장으로 해결 목표 설명]

## 🔍 문제 분석

### 현재 상태
- [현재 어떻게 동작하는가]

### 문제점
- [무엇이 문제인가]
- [왜 문제인가]

### 예상 원인
- [문제의 근본 원인]

## 💡 해결 방안

### 접근 방법
[어떻게 해결할 것인가 - 2-3가지 옵션 제시 가능]

### 선택한 방법 (추천)
[최선의 방법과 그 이유]

## ⚙️ 구현 계획

### Task 1: [작업명] (예상: Xh)

**파일 경로**:
- `파일/경로.ts` (생성/수정)

**구현 단계**:
- [ ] 1. [세부 단계 1]
- [ ] 2. [세부 단계 2]

**검증 기준**:
- [ ] [테스트 시나리오 1]

---

### Task 2: [작업명] (예상: Xh)

[동일한 형식 반복]

## 📁 영향받는 파일

### 수정할 파일
- `파일1.ts` - [변경 내용]
- `파일2.tsx` - [변경 내용]

### 신규 생성 파일 (필요시)
- `새파일.ts` - [용도]

## 🧪 테스트 계획

### Given-When-Then 시나리오

**시나리오 1: [정상 케이스]**
```
Given: [초기 상태]
When: [사용자 행동]
Then: [예상 결과]
```

**시나리오 2: [엣지 케이스]**
```
Given: [초기 상태]
When: [사용자 행동]
Then: [예상 결과]
```

## ✅ 완료 기준
- [ ] 모든 Task 완료
- [ ] 모든 테스트 시나리오 통과
- [ ] 코드 리뷰 완료
- [ ] 이슈 #$ARGUMENT 클로즈

## ⚠️ 주의사항
- [고려해야 할 사항]
- [잠재적 부작용]

## 📊 예상 시간
- 총 예상 시간: [X시간]
- 우선순위: [P0/P1/P2/P3]
```

### 4단계: 사용자 승인 요청

계획을 작성한 후, **반드시** AskUserQuestion 도구를 사용하여 사용자에게 다음을 물어봅니다:

```
질문: "이슈 해결 계획을 검토해주세요. 어떻게 진행할까요?"

선택지:
1. "계획 승인 - 바로 구현 시작" (추천)
   - 설명: 계획대로 즉시 구현을 시작합니다
2. "계획 수정 필요"
   - 설명: 계획을 수정한 후 다시 검토합니다
3. "다른 접근 방법 제안"
   - 설명: 대안을 제시하고 다시 계획을 수립합니다
4. "나중에 구현"
   - 설명: 계획만 저장하고 구현은 나중에 합니다
```

### 5단계: 사용자 선택에 따른 행동

**"계획 승인 - 바로 구현 시작"** 선택 시:
1. TaskCreate 도구로 각 Task를 할 일 목록에 추가
2. Task 1부터 순차적으로 구현 시작
3. 각 Task 완료 시 TaskUpdate로 상태 업데이트
4. 모든 Task 완료 후 테스트 시나리오 검증
5. gh issue close 명령어로 이슈 종료

**"계획 수정 필요"** 선택 시:
- 어떤 부분을 수정할지 사용자에게 질문
- 계획을 수정하고 다시 4단계로 이동

**"다른 접근 방법 제안"** 선택 시:
- 대안을 제시받고 새로운 계획 수립
- 다시 4단계로 이동

**"나중에 구현"** 선택 시:
- 계획을 `issues/issue-$ARGUMENT-plan.md` 파일로 저장
- "계획이 저장되었습니다. 나중에 /resolve-issue $ARGUMENT를 다시 실행하면 이어서 구현할 수 있습니다." 메시지 출력

## 📐 구현 원칙

계획 수립 시 다음 원칙을 따릅니다:

### 1. 파일 구조 (GUIDE.md 참조)
- 순수 함수 → `lib/`
- 상태 관리 → `hooks/`
- UI 컴포넌트 → `components/`
- 페이지 → `app/`
- 타입 → `types/`

### 2. Task 크기
- **1-4시간** 단위로 분해
- 하루에 2-3개 Task 완료 가능하도록

### 3. 의존성 순서
```
타입 정의 → 순수 함수 → 상태 관리 → UI 컴포넌트 → 페이지 통합
```

### 4. 기존 패턴 유지
- SPEC.md, TEMPLATE.md, GUIDE.md의 패턴 준수
- 기존 코드 스타일 일관성 유지
- 재사용 가능한 컴포넌트 우선 활용

## 예시 흐름

```
입력: /resolve-issue 42

1. gh issue view 42 실행
   → "검색 결과가 없을 때 빈 화면만 표시됨" 이슈 확인

2. 코드베이스 탐색
   → app/search/page.tsx 읽기
   → 관련 컴포넌트 확인

3. 계획 수립
   → Task 1: EmptyState 컴포넌트 생성 (2h)
   → Task 2: search 페이지에 통합 (1h)

4. 사용자 승인 요청
   → "계획 승인 - 바로 구현 시작" 선택

5. 구현
   → Task 1 구현 및 완료
   → Task 2 구현 및 완료
   → 테스트 검증
   → gh issue close 42
```

## 중요 체크리스트

계획 수립 전 반드시 확인:
- [ ] 이슈 내용을 정확히 이해했는가?
- [ ] 관련 파일을 모두 찾았는가?
- [ ] 기존 코드 패턴을 파악했는가?
- [ ] Task가 1-4시간 단위로 적절히 분해되었는가?
- [ ] 테스트 시나리오가 충분한가?
- [ ] 잠재적 부작용을 고려했는가?

## 실행

위 단계를 따라 이슈를 분석하고, 상세한 해결 계획을 수립한 후, 사용자 승인을 받아 구현을 진행합니다.
